{#{% extends 'master.html' %}#}
{##}
{#{% block content %}#}
{#<div class="container mt-4">#}
{#    <div class="card shadow">#}
{#        <div class="card-header bg-primary text-white">#}
{#            <h4><i class="bi bi-clipboard-data"></i> Test Results for Sample #{{ sample.id }}</h4>#}
{#        </div>#}
{#        #}
{#        <div class="card-body">#}
{#            <div class="row mb-4">#}
{#                <div class="col-md-6">#}
{#                    <h5>Sample Details</h5>#}
{#                    <dl class="row">#}
{#                        <dt class="col-sm-4">Batch Number:</dt>#}
{#                        <dd class="col-sm-8">{{ sample.batch_number }}</dd>#}
{#                        #}
{#                        <dt class="col-sm-4">Sample Type:</dt>#}
{#                        <dd class="col-sm-8">{{ sample.sample_type }}</dd>#}
{#                    </dl>#}
{#                </div>#}
{#                #}
{#                <div class="col-md-6">#}
{#                    <h5>Testing Information</h5>#}
{#                    <dl class="row">#}
{#                        <dt class="col-sm-4">Test Date:</dt>#}
{#                        <dd class="col-sm-8">{{ sample.test_results.test_date|date:"M d, Y" }}</dd>#}
{#                        #}
{#                        <dt class="col-sm-4">Conducted By:</dt>#}
{#                        <dd class="col-sm-8">{{ sample.test_results.conducted_by.get_full_name }}</dd>#}
{#                    </dl>#}
{#                </div>#}
{#            </div>#}
{##}
{#            <div class="row">#}
{#                <div class="col-md-12">#}
{#                    <h5 class="mb-3">Test Results</h5>#}
{#                    <div class="table-responsive">#}
{#                        <table class="table table-bordered">#}
{#                            <thead class="table-light">#}
{#                                <tr>#}
{#                                    <th>Parameter</th>#}
{#                                    <th>Result</th>#}
{#                                    <th>Reference Range</th>#}
{#                                    <th>Status</th>#}
{#                                </tr>#}
{#                            </thead>#}
{#                            <tbody>#}
{#                                {% for param in sample.test_results.parameters_tested %}#}
{#                                <tr>#}
{#                                    <td>{{ param.name }}</td>#}
{#                                    <td>{{ param.value }} {{ param.unit }}</td>#}
{#                                    <td>{{ param.reference }}</td>#}
{#                                    <td>#}
{#                                        <span class="badge {% if param.status == 'pass' %}bg-success{% else %}bg-danger{% endif %}">#}
{#                                            {{ param.status|upper }}#}
{#                                        </span>#}
{#                                    </td>#}
{#                                </tr>#}
{#                                {% endfor %}#}
{#                            </tbody>#}
{#                        </table>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#            #}
{#            <div class="mt-4">#}
{#                <h5>Quality Analysis</h5>#}
{#                <div class="alert alert-info">#}
{#                    {{ sample.test_results.quality_analysis }}#}
{#                </div>#}
{#            </div>#}
{#            #}
{#            <div class="text-end mt-4">#}
{#                <a href="{% url 'sample_tracking' %}" class="btn btn-secondary">#}
{#                    <i class="bi bi-arrow-left"></i> Back to Tracking#}
{#                </a>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}
{#</div>#}
{#{% endblock %}#}
{#{% extends 'master.html' %}#}
{##}
{#{% block title %}#}
{#    <title>Test Results - Sample Track</title>#}
{#{% endblock %}#}
{##}
{#{% block content %}#}
{#<div class="container mt-4">#}
{#    {% with test_result=sample.test_results.first %}#}
{#        {% if test_result %}#}
{#            <div class="card shadow">#}
{#                <div class="card-header bg-primary text-white">#}
{#                    <h4><i class="bi bi-clipboard-data"></i> Test Results for Sample #{{ sample.id }}</h4>#}
{#                </div>#}
{#                #}
{#                <div class="card-body">#}
{#                    <div class="row mb-4">#}
{#                        <div class="col-md-6">#}
{#                            <h5>Sample Details</h5>#}
{#                            <dl class="row">#}
{#                                <dt class="col-sm-4">Batch Number:</dt>#}
{#                                <dd class="col-sm-8">{{ sample.batch_number }}</dd>#}
{#                                #}
{#                                <dt class="col-sm-4">Sample Type:</dt>#}
{#                                <dd class="col-sm-8">{{ sample.sample_type }}</dd>#}
{#                            </dl>#}
{#                        </div>#}
{#                        #}
{#                        <div class="col-md-6">#}
{#                            <h5>Testing Information</h5>#}
{#                            <dl class="row">#}
{#                                <dt class="col-sm-4">Test Date:</dt>#}
{#                                <dd class="col-sm-8">{{ test_result.test_date|date:"M d, Y" }}</dd>#}
{#                                #}
{#                                <dt class="col-sm-4">Conducted By:</dt>#}
{#                                <dd class="col-sm-8">#}
{#                                    {% if test_result.conducted_by %}#}
{#                                        {{ test_result.conducted_by.get_full_name }}#}
{#                                    {% else %}#}
{#                                        N/A#}
{#                                    {% endif %}#}
{#                                </dd>#}
{#                            </dl>#}
{#                        </div>#}
{#                    </div>#}
{#                    #}
{#                    <div class="row">#}
{#                        <div class="col-md-12">#}
{#                            <h5 class="mb-3">Test Results</h5>#}
{#                            {% if test_result.parameters_tested %}#}
{#                                <div class="table-responsive">#}
{#                                    <table class="table table-bordered">#}
{#                                        <thead class="table-light">#}
{#                                            <tr>#}
{#                                                <th>Parameter</th>#}
{#                                                <th>Result</th>#}
{#                                                <th>Reference Range</th>#}
{#                                                <th>Status</th>#}
{#                                            </tr>#}
{#                                        </thead>#}
{#                                        <tbody>#}
{#                                            {% for param in test_result.parameters_tested %}#}
{#                                                <tr>#}
{#                                                    <td>{{ param.name }}</td>#}
{#                                                    <td>{{ param.value }} {{ param.unit }}</td>#}
{#                                                    <td>{{ param.reference }}</td>#}
{#                                                    <td>#}
{#                                                        <span class="badge {% if param.status == 'pass' %}bg-success{% else %}bg-danger{% endif %}">#}
{#                                                            {{ param.status|upper }}#}
{#                                                        </span>#}
{#                                                    </td>#}
{#                                                </tr>#}
{#                                            {% endfor %}#}
{#                                        </tbody>#}
{#                                    </table>#}
{#                                </div>#}
{#                            {% else %}#}
{#                                <div class="alert alert-info text-center">#}
{#                                    No test parameters available.#}
{#                                </div>#}
{#                            {% endif %}#}
{#                        </div>#}
{#                    </div>#}
{#                    #}
{#                    <div class="mt-4">#}
{#                        <h5>Quality Analysis</h5>#}
{#                        <div class="alert alert-info">#}
{#                            {{ test_result.quality_analysis }}#}
{#                        </div>#}
{#                    </div>#}
{#                    #}
{#                    <div class="text-end mt-4">#}
{#                        <a href="{% url 'sample_tracking' %}" class="btn btn-secondary">#}
{#                            <i class="bi bi-arrow-left"></i> Back to Tracking#}
{#                        </a>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#        {% else %}#}
{#            <div class="alert alert-info text-center py-4">#}
{#                No test results available for this sample.#}
{#            </div>#}
{#        {% endif %}#}
{#    {% endwith %}#}
{#</div>#}
{#{% endblock %}#}
{#{% extends 'master.html' %}#}
{##}
{#{% block title %}#}
{#    <title>Testing Results - Sample Track</title>#}
{#{% endblock %}#}
{##}
{#{% block content %}#}
{#<main id="main" class="main">#}
{#  <div class="container">#}
{#    <div class="card shadow">#}
{#      <div class="card-body">#}
{#        <h2 class="card-title mb-4"><i class="bi bi-clipboard-data"></i> Testing Results</h2>#}
{#        #}
{#        <!-- Search Bar -->#}
{#        <div class="row mb-4 g-3">#}
{#          <div class="col-md-8">#}
{#            <input type="text" id="searchInput" class="form-control" #}
{#                   placeholder="Search by Sample ID or Batch Number" value="{{ search_query }}">#}
{#          </div>#}
{#          <div class="col-md-4">#}
{#            <button class="btn btn-primary w-100" onclick="performSearch()">#}
{#              <i class="bi bi-search"></i> Search#}
{#            </button>#}
{#          </div>#}
{#        </div>#}
{#        #}
{#        {% if results %}#}
{#          <!-- Results Table -->#}
{#          <div class="table-responsive">#}
{#            <table class="table table-hover table-bordered">#}
{#              <thead class="table-light">#}
{#                <tr>#}
{#                  <th>Sample ID</th>#}
{#                  <th>Batch Number</th>#}
{#                  <th>Quality Analysis</th>#}
{#                  <th>Compliance</th>#}
{#                  <th>Test Date</th>#}
{#                  <th>Actions</th>#}
{#                </tr>#}
{#              </thead>#}
{#              <tbody>#}
{#                {% for result in results %}#}
{#                  <tr>#}
{#                    <td>#}
{#                      {% if result.sample and result.sample.id %}#}
{#                        {{ result.sample.id }}#}
{#                      {% else %}#}
{#                        N/A#}
{#                      {% endif %}#}
{#                    </td>#}
{#                    <td>#}
{#                      {% if result.sample and result.sample.batch_number %}#}
{#                        {{ result.sample.batch_number }}#}
{#                      {% else %}#}
{#                        N/A#}
{#                      {% endif %}#}
{#                    </td>#}
{#                    <td class="text-truncate" style="max-width: 200px;">{{ result.quality_analysis }}</td>#}
{#                    <td>#}
{#                      <span class="badge {% if result.compliance_status %}bg-success{% else %}bg-danger{% endif %}">#}
{#                        {{ result.get_compliance_status_display }}#}
{#                      </span>#}
{#                    </td>#}
{#                    <td>{{ result.test_date|date:"Y-m-d" }}</td>#}
{#                    <td>#}
{#                      {% if result.sample and result.sample.id %}#}
{#                        <a href="{% url 'test_results_detail' sample_id=result.sample.id %}" #}
{#                           class="btn btn-sm btn-primary">#}
{#                           <i class="bi bi-eye"></i> View Details#}
{#                        </a>#}
{#                      {% else %}#}
{#                        <span class="text-muted">No details available</span>#}
{#                      {% endif %}#}
{#                    </td>#}
{#                  </tr>#}
{#                {% endfor %}#}
{#              </tbody>#}
{#            </table>#}
{#          </div>#}
{#        {% else %}#}
{#          <div class="alert alert-info text-center py-4">#}
{#            No test results available.#}
{#          </div>#}
{#        {% endif %}#}
{#      </div>#}
{#    </div>#}
{#  </div>#}
{#</main>#}
{##}
{#<script>#}
{#function performSearch() {#}
{#  const query = document.getElementById('searchInput').value;#}
{#  window.location.href = `{% url 'testing_results' %}?q=${encodeURIComponent(query)}`;#}
{#}#}
{##}
{#document.getElementById('searchInput').addEventListener('keypress', function(e) {#}
{#  if (e.key === 'Enter') {#}
{#    performSearch();#}
{#  }#}
{#});#}
{#</script>#}
{##}
{#<style>#}
{#.table-hover tbody tr:hover {#}
{#  background-color: rgba(13, 110, 253, 0.05);#}
{#}#}
{#.text-truncate {#}
{#  max-width: 200px;#}
{#  white-space: nowrap;#}
{#  overflow: hidden;#}
{#  text-overflow: ellipsis;#}
{#}#}
{#.badge {#}
{#  font-size: 0.9em;#}
{#  padding: 0.5em 0.75em;#}
{#}#}
{#</style>#}
{#{% endblock %}#}
{% extends 'master.html' %}

{% block title %}
    <title>Test Results Detail - Sample Track</title>
{% endblock %}

{% block content %}
<div class="container mt-4">
    {% if test_result %}
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h4>Test Results for Sample #{{ sample.sample_id }} - Batch {{ sample.batch_number }}</h4>
            </div>
            <div class="card-body">
                <h5>Basic Test Information</h5>
                <dl class="row">
                    <dt class="col-sm-3">Test Date:</dt>
                    <dd class="col-sm-9">{{ test_result.test_date|date:"M d, Y" }}</dd>
                    <dt class="col-sm-3">Conducted By:</dt>
                    <dd class="col-sm-9">
                        {% if test_result.conducted_by %}
                            {{ test_result.conducted_by.get_full_name }}
                        {% else %}
                            N/A
                        {% endif %}
                    </dd>
                    <dt class="col-sm-3">Quality Analysis:</dt>
                    <dd class="col-sm-9">{{ test_result.quality_analysis }}</dd>
                </dl>
                
                {% if detail %}
                    <h5 class="mt-4">Detailed Test Parameters</h5>
                    {% if detail.parameters %}
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th>Parameter</th>
                                        <th>Value</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for key, value in detail.parameters.items %}
                                    <tr>
                                        <td>{{ key }}</td>
                                        <td>{{ value }}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="alert alert-info">
                            No detailed parameters available.
                        </div>
                    {% endif %}
                    
                    {% if detail.additional_notes %}
                        <h5 class="mt-4">Additional Notes</h5>
                        <p>{{ detail.additional_notes }}</p>
                    {% endif %}
                {% else %}
                    <div class="alert alert-info">
                        No extra details available for this test result.
                    </div>
                {% endif %}
                
                <div class="mt-4 text-end">
                    <a href="{% url 'sample_tracking' %}" class="btn btn-secondary">
                        <i class="bi bi-arrow-left"></i> Back to Tracking
                    </a>
                </div>
            </div>
        </div>
    {% else %}
        <div class="alert alert-warning text-center">
            No test result available for this sample.
        </div>
    {% endif %}
</div>
{% endblock %}
